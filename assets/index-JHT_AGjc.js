/* empty css             *//* empty css                */import"./el-tab-pane-l0sNRNKZ.js";/* empty css                  *//* empty css                   */import{d as C,r as d,c as R,f as e,k as V,w as n,b as k,J as x,e as v,v as U,g as M,a as L,E as h,u as p,s as F,_ as z,t as P,n as O,K as j,i as I,F as H,m as q,L as J,M as K,N as $,O as G,H as Q,I as W}from"./index-BrD9HEJJ.js";/* empty css                        *//* empty css                 *//* empty css                 *//* empty css                  */const X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e",Y=C({__name:"Notification",setup(w){const o=d(!1),r=()=>{Notification.requestPermission().then(a=>{if(console.log(a),o.value=a==="granted",a==="granted"){const l="嘿！你开启了网站的通知功能",s=new Notification("测试",{body:l,icon:X,timestamp:Date.now(),requireInteraction:!0,vibrate:!0});console.log(s),s.onclick=()=>{x.success("你点击了通知")},s.onclose=()=>{x.info("你关闭了通知")}}})};return(a,l)=>{const s=V;return v(),R("div",null,[e(s,{type:"primary",onClick:r},{default:n(()=>l[0]||(l[0]=[k("允许网页通知")])),_:1,__:[0]})])}}}),Z=C({__name:"Photo",setup(w){const o=d(null),r=d(""),a=d(null),l=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(i=>{a.value=i,o.value.srcObject=i,o.value.play()}).catch(i=>{x.error("获取摄像头失败")})},s=()=>{const i=document.createElement("canvas");i.width=500,i.height=500,i.getContext("2d").drawImage(o.value,0,0,i.width,i.height),r.value=i.toDataURL("image/png")},g=()=>{a.value&&a.value.getTracks().forEach(c=>{c.stop()})};return(i,c)=>{const _=V,m=h,y=F;return v(),U(m,{direction:"vertical",size:"large",alignment:"flex-start"},{default:n(()=>[e(m,{size:"large"},{default:n(()=>[e(_,{onClick:l},{default:n(()=>c[0]||(c[0]=[k("开始打开摄像头")])),_:1,__:[0]}),e(_,{onClick:s},{default:n(()=>c[1]||(c[1]=[k("拍照")])),_:1,__:[1]}),e(_,{onClick:g},{default:n(()=>c[2]||(c[2]=[k("关闭摄像头")])),_:1,__:[2]})]),_:1}),p(r)?(v(),U(y,{key:0,src:p(r),alt:""},null,8,["src"])):M("",!0),L("video",{ref_key:"video",ref:o},null,512)]),_:1})}}}),ee=z(Z,[["__scopeId","data-v-4ef6af57"]]),te=["disable"],oe=C({__name:"Record",setup(w){const o=d(null),r=d(null),a=d([]),l=d(null),s=d(!1),g=()=>{s.value=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then(c=>{o.value=c,r.value=new MediaRecorder(c),console.log(r.value),r.value.ondataavailable=_=>{a.value.push(_.data)},r.value.onstop=_=>{if(a.value.length>0){const m=new Blob(a.value,{type:"audio/ogg; codecs=opus"});l.value.src=URL.createObjectURL(m),l.value.play(),s.value=!1}else x.error("没有捕获到音频数据")},r.value.start()}).catch(c=>{x.error("获取摄像头失败")})},i=()=>{var c;o.value&&((c=r.value)==null||c.stop(),o.value.getTracks().forEach(m=>{m.stop()}))};return(c,_)=>{const m=V,y=h;return v(),U(y,{direction:"vertical",size:"large",alignment:"flex-start"},{default:n(()=>[e(y,{size:"large"},{default:n(()=>[e(m,{disabled:p(s),onClick:g},{default:n(()=>_[0]||(_[0]=[k("开始录音")])),_:1,__:[0]},8,["disabled"]),e(m,{disabled:!p(s),onClick:i},{default:n(()=>_[1]||(_[1]=[k("结束录音")])),_:1,__:[1]},8,["disabled"])]),_:1}),e(y,{size:"large"},{default:n(()=>[L("audio",{ref_key:"audio",ref:l,controls:"",disable:c.show},null,8,te)]),_:1})]),_:1})}}}),ne=z(oe,[["__scopeId","data-v-50826cb6"]]),ae={key:0},le=C({__name:"Location",setup(w){const o=d({}),r=()=>{const a=O.service({fullscreen:!0,text:"获取位置信息中..."});navigator.geolocation.getCurrentPosition(l=>{const{latitude:s,longitude:g}=l.coords;o.value={latitude:s,longitude:g},a.close()},l=>{a.close(),x.error(l)})};return(a,l)=>{const s=V;return v(),R("div",null,[e(s,{type:"primary",onClick:r},{default:n(()=>l[0]||(l[0]=[k("获取当前位置")])),_:1,__:[0]}),p(o).longitude&&p(o).latitude?(v(),R("div",ae,"你的位置：经度 "+P(p(o).longitude)+" ，纬度 "+P(p(o).latitude),1)):M("",!0)])}}}),se=C({__name:"Encode",setup(w){const o=d(""),r=d(""),a=d("url"),l=d([{label:"URL编码",value:"url"},{label:"Unicode编码",value:"unicode"},{label:"二进制编码",value:"byte"},{label:"base64编码",value:"base64"}]),s=u=>{let t="";for(var b=0;b<u.length;b++)t+="\\u"+u.charCodeAt(b).toString(16).padStart(4,"0");return t},g=u=>{const t=/[0-9a-fA-F]+/g;let b="";return u.replace(t,E=>{b+=String.fromCharCode(parseInt(E,16))}),b},i=u=>new TextEncoder().encode(u).join(","),c=u=>{const t=new Uint8Array(u.split(","));return new TextDecoder().decode(t)},_=u=>btoa(encodeURIComponent(u)),m=u=>decodeURIComponent(atob(u)),y=(u=!1)=>{let t=()=>{};switch(a.value){case"url":t=u?encodeURIComponent:decodeURIComponent;break;case"unicode":t=u?s:g;break;case"byte":t=u?i:c;break;case"base64":t=u?_:m;break}u?r.value=t(o.value):o.value=t(r.value)};return(u,t)=>{const b=G,E=j,B=J,D=$("Right"),S=K,N=V,A=$("Back"),T=h;return v(),U(T,{size:"large",direction:"vertical",alignment:"flex-start"},{default:n(()=>[e(E,{modelValue:p(a),"onUpdate:modelValue":t[0]||(t[0]=f=>I(a)?a.value=f:null),placeholder:"请选择加密/解密的类型",size:"large",style:{width:"240px"}},{default:n(()=>[(v(!0),R(H,null,q(p(l),f=>(v(),U(b,{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(T,{size:"large"},{default:n(()=>[e(B,{modelValue:p(o),"onUpdate:modelValue":t[1]||(t[1]=f=>I(o)?o.value=f:null),type:"textarea",rows:10,cols:30},null,8,["modelValue"]),e(T,{direction:"vertical",size:"large"},{default:n(()=>[e(N,{type:"primary",onClick:t[2]||(t[2]=f=>y(!0))},{default:n(()=>[t[5]||(t[5]=k(" 编码 ")),e(S,null,{default:n(()=>[e(D)]),_:1})]),_:1,__:[5]}),e(N,{type:"primary",onClick:t[3]||(t[3]=f=>y(!1))},{default:n(()=>[t[6]||(t[6]=k(" 解码 ")),e(S,null,{default:n(()=>[e(A)]),_:1})]),_:1,__:[6]})]),_:1}),e(B,{modelValue:p(r),"onUpdate:modelValue":t[4]||(t[4]=f=>I(r)?r.value=f:null),type:"textarea",rows:10,cols:30},null,8,["modelValue"])]),_:1})]),_:1})}}}),re=C({__name:"index",setup(w){const o=d("notification"),r=a=>{o.value=a.props.name};return(a,l)=>{const s=W,g=Q;return v(),R("main",null,[l[1]||(l[1]=L("div",null,"一些可能会用到的webapi使用场景",-1)),e(g,{modelValue:p(o),"onUpdate:modelValue":l[0]||(l[0]=i=>I(o)?o.value=i:null),class:"demo-tabs",onTabClick:r},{default:n(()=>[e(s,{label:"网页通知",name:"notification"},{default:n(()=>[e(Y)]),_:1}),e(s,{label:"摄像头获取",name:"photo"},{default:n(()=>[e(ee)]),_:1}),e(s,{label:"录音",name:"record"},{default:n(()=>[e(ne)]),_:1}),e(s,{label:"位置信息",name:"location"},{default:n(()=>[e(le)]),_:1}),e(s,{label:"编码",name:"encode"},{default:n(()=>[e(se)]),_:1})]),_:1},8,["modelValue"])])}}}),be=z(re,[["__scopeId","data-v-a4161c5d"]]);export{be as default};
