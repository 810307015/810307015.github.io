/* empty css                    *//* empty css                *//* empty css                  */import{d as w,r as i,e as v,c as C,g as e,w as o,b as k,L as x,s as I,y as R,u as _,k as M,a as S,q as T,x as A,_ as L,t as P,E as F,M as $,j as O,F as q,i as U,N as H,O as J,P as K,Q,J as G,p as W,f as X,K as Y}from"./index-CtLRTTBE.js";/* empty css                  */const Z="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e",ee=w({__name:"Notification",setup(g){const t=i(!1),s=()=>{Notification.requestPermission().then(n=>{if(console.log(n),t.value=n==="granted",n==="granted"){const r="嘿！你开启了网站的通知功能",l=new Notification("测试",{body:r,icon:Z,timestamp:Date.now(),requireInteraction:!0,vibrate:!0});console.log(l),l.onclick=()=>{x.success("你点击了通知")},l.onclose=()=>{x.info("你关闭了通知")}}})};return(n,r)=>{const l=I;return v(),C("div",null,[e(l,{type:"primary",onClick:s},{default:o(()=>[k("允许网页通知")]),_:1})])}}}),te=w({__name:"Photo",setup(g){const t=i(null),s=i(""),n=i(null),r=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(u=>{n.value=u,t.value.srcObject=u,t.value.play()}).catch(u=>{x.error("获取摄像头失败")})},l=()=>{const u=document.createElement("canvas");u.width=500,u.height=500,u.getContext("2d").drawImage(t.value,0,0,u.width,u.height),s.value=u.toDataURL("image/png")},b=()=>{n.value&&n.value.getTracks().forEach(d=>{d.stop()})};return(u,d)=>{const f=I,p=T,y=A;return v(),R(p,{direction:"vertical",size:"large",alignment:"flex-start"},{default:o(()=>[e(p,{size:"large"},{default:o(()=>[e(f,{onClick:r},{default:o(()=>[k("开始打开摄像头")]),_:1}),e(f,{onClick:l},{default:o(()=>[k("拍照")]),_:1}),e(f,{onClick:b},{default:o(()=>[k("关闭摄像头")]),_:1})]),_:1}),_(s)?(v(),R(y,{key:0,src:_(s),alt:""},null,8,["src"])):M("",!0),S("video",{ref_key:"video",ref:t},null,512)]),_:1})}}}),oe=L(te,[["__scopeId","data-v-4ef6af57"]]),ae=["disable"],ne=w({__name:"Record",setup(g){const t=i(null),s=i(null),n=i([]),r=i(null),l=i(!1),b=()=>{l.value=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then(d=>{t.value=d,s.value=new MediaRecorder(d),console.log(s.value),s.value.ondataavailable=f=>{n.value.push(f.data)},s.value.onstop=f=>{if(n.value.length>0){const p=new Blob(n.value,{type:"audio/ogg; codecs=opus"});r.value.src=URL.createObjectURL(p),r.value.play(),l.value=!1}else x.error("没有捕获到音频数据")},s.value.start()}).catch(d=>{x.error("获取摄像头失败")})},u=()=>{var d;t.value&&((d=s.value)==null||d.stop(),t.value.getTracks().forEach(p=>{p.stop()}))};return(d,f)=>{const p=I,y=T;return v(),R(y,{direction:"vertical",size:"large",alignment:"flex-start"},{default:o(()=>[e(y,{size:"large"},{default:o(()=>[e(p,{disabled:_(l),onClick:b},{default:o(()=>[k("开始录音")]),_:1},8,["disabled"]),e(p,{disabled:!_(l),onClick:u},{default:o(()=>[k("结束录音")]),_:1},8,["disabled"])]),_:1}),e(y,{size:"large"},{default:o(()=>[S("audio",{ref_key:"audio",ref:r,controls:"",disable:d.show},null,8,ae)]),_:1})]),_:1})}}}),le=L(ne,[["__scopeId","data-v-50826cb6"]]),se={key:0},ce=w({__name:"Location",setup(g){const t=i({}),s=()=>{const n=F.service({fullscreen:!0,text:"获取位置信息中..."});navigator.geolocation.getCurrentPosition(r=>{const{latitude:l,longitude:b}=r.coords;t.value={latitude:l,longitude:b},n.close()},r=>{n.close(),x.error(r)})};return(n,r)=>{const l=I;return v(),C("div",null,[e(l,{type:"primary",onClick:s},{default:o(()=>[k("获取当前位置")]),_:1}),_(t).longitude&&_(t).latitude?(v(),C("div",se,"你的位置：经度 "+P(_(t).longitude)+" ，纬度 "+P(_(t).latitude),1)):M("",!0)])}}}),re=w({__name:"Encode",setup(g){const t=i(""),s=i(""),n=i("url"),r=i([{label:"URL编码",value:"url"},{label:"Unicode编码",value:"unicode"},{label:"二进制编码",value:"byte"},{label:"base64编码",value:"base64"}]),l=c=>{let a="";for(var h=0;h<c.length;h++)a+="\\u"+c.charCodeAt(h).toString(16).padStart(4,"0");return a},b=c=>{const a=/[0-9a-fA-F]+/g;let h="";return c.replace(a,V=>{h+=String.fromCharCode(parseInt(V,16))}),h},u=c=>new TextEncoder().encode(c).join(","),d=c=>{const a=new Uint8Array(c.split(","));return new TextDecoder().decode(a)},f=c=>btoa(encodeURIComponent(c)),p=c=>decodeURIComponent(atob(c)),y=(c=!1)=>{let a=()=>{};switch(n.value){case"url":a=c?encodeURIComponent:decodeURIComponent;break;case"unicode":a=c?l:b;break;case"byte":a=c?u:d;break;case"base64":a=c?f:p;break}c?s.value=a(t.value):t.value=a(s.value)};return(c,a)=>{const h=Q,V=H,z=J,D=$("Right"),B=K,N=I,j=$("Back"),E=T;return v(),R(E,{size:"large",direction:"vertical",alignment:"flex-start"},{default:o(()=>[e(V,{modelValue:_(n),"onUpdate:modelValue":a[0]||(a[0]=m=>U(n)?n.value=m:null),placeholder:"请选择加密/解密的类型",size:"large",style:{width:"240px"}},{default:o(()=>[(v(!0),C(q,null,O(_(r),m=>(v(),R(h,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(E,{size:"large"},{default:o(()=>[e(z,{modelValue:_(t),"onUpdate:modelValue":a[1]||(a[1]=m=>U(t)?t.value=m:null),type:"textarea",rows:10,cols:30},null,8,["modelValue"]),e(E,{direction:"vertical",size:"large"},{default:o(()=>[e(N,{type:"primary",onClick:a[2]||(a[2]=m=>y(!0))},{default:o(()=>[k(" 编码 "),e(B,null,{default:o(()=>[e(D)]),_:1})]),_:1}),e(N,{type:"primary",onClick:a[3]||(a[3]=m=>y(!1))},{default:o(()=>[k(" 解码 "),e(B,null,{default:o(()=>[e(j)]),_:1})]),_:1})]),_:1}),e(z,{modelValue:_(s),"onUpdate:modelValue":a[4]||(a[4]=m=>U(s)?s.value=m:null),type:"textarea",rows:10,cols:30},null,8,["modelValue"])]),_:1})]),_:1})}}}),ue=g=>(W("data-v-a4161c5d"),g=g(),X(),g),ie=ue(()=>S("div",null,"一些可能会用到的webapi使用场景",-1)),de=w({__name:"index",setup(g){const t=i("notification"),s=n=>{t.value=n.props.name};return(n,r)=>{const l=Y,b=G;return v(),C("main",null,[ie,e(b,{modelValue:_(t),"onUpdate:modelValue":r[0]||(r[0]=u=>U(t)?t.value=u:null),class:"demo-tabs",onTabClick:s},{default:o(()=>[e(l,{label:"网页通知",name:"notification"},{default:o(()=>[e(ee)]),_:1}),e(l,{label:"摄像头获取",name:"photo"},{default:o(()=>[e(oe)]),_:1}),e(l,{label:"录音",name:"record"},{default:o(()=>[e(le)]),_:1}),e(l,{label:"位置信息",name:"location"},{default:o(()=>[e(ce)]),_:1}),e(l,{label:"编码",name:"encode"},{default:o(()=>[e(re)]),_:1})]),_:1},8,["modelValue"])])}}}),ge=L(de,[["__scopeId","data-v-a4161c5d"]]);export{ge as default};
