/* empty css             */import"./el-tab-pane-l0sNRNKZ.js";/* empty css                        *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        */import{d as A,r as u,c as $,a as x,f as a,g as B,E as Y,w as d,h as W,u as t,i as I,j as P,k as N,b as w,l as T,F as H,m as O,n as j,p as se,q as X,e as _,s as q,_ as G,v as D,x as ue,y as S,z as re,A as ie,t as de,B as ce,C as me,D as pe,G as ve,H as _e,I as fe}from"./index-BrD9HEJJ.js";/* empty css                   *//* empty css                  */const ge={key:0,class:"image-list"},be={class:"row"},ye={class:"col"},xe=A({__name:"CropMulti",setup(z){const i=u(null),n=u([]),c=u(3),p=u(3),v=b=>{const o=b.raw,r=j.service({fullscreen:!0,text:"裁剪中..."});o.arrayBuffer().then(k=>{se(new Uint8Array(k),c.value,p.value).forEach(y=>{const V=new Blob([new Uint8Array(y)],{type:"image/png"});n.value.push(URL.createObjectURL(V))}),X(()=>{r.close()})})},e=()=>{n.value=[],i.value.clearFiles()},g=()=>{n.value.forEach((b,o)=>{const r=document.createElement("a");r.href=b,r.download=`crop-${o+1}`,r.click()})};return(b,o)=>{const r=W,k=Y,f=N,y=P,V=q;return _(),$("main",null,[o[7]||(o[7]=x("div",{class:"header"},"使用rust的image包进行图片裁剪然后通过webassembly进行调用，直接对大尺寸图片进行等比例裁剪",-1)),a(k,{style:{"margin-bottom":"10px"}},{default:d(()=>[x("div",null,[o[2]||(o[2]=x("span",null,"需要裁剪成几行：",-1)),a(r,{modelValue:t(c),"onUpdate:modelValue":o[0]||(o[0]=C=>I(c)?c.value=C:null),min:1,max:10,onChange:e},null,8,["modelValue"])]),x("div",null,[o[3]||(o[3]=x("span",null,"需要裁剪成几列：",-1)),a(r,{modelValue:t(p),"onUpdate:modelValue":o[1]||(o[1]=C=>I(p)?p.value=C:null),min:1,max:10,onChange:e},null,8,["modelValue"])])]),_:1}),a(y,{ref_key:"upload",ref:i,action:"#","list-type":"picture","auto-upload":!1,limit:1,onChange:v},{default:d(()=>[a(f,null,{default:d(()=>o[4]||(o[4]=[w("上传")])),_:1,__:[4]}),a(f,{onClick:T(e,["stop"])},{default:d(()=>o[5]||(o[5]=[w("重置")])),_:1,__:[5]})]),_:1},512),t(n).length?(_(),$("div",ge,[(_(!0),$(H,null,O(new Array(t(c)).fill(0),(C,L)=>(_(),$("div",be,[(_(!0),$(H,null,O(new Array(t(p)).fill(0),(h,M)=>(_(),$("div",ye,[a(V,{style:{width:"100px"},src:t(n)[L*t(p)+M],fit:"contain"},null,8,["src"])]))),256))]))),256)),a(f,{type:"primary",onClick:g},{default:d(()=>o[6]||(o[6]=[w("一键下载")])),_:1,__:[6]})])):B("",!0)])}}}),$e=G(xe,[["__scopeId","data-v-fb93322b"]]),we={style:{padding:"20px"}},ke={style:{padding:"20px"}},Ce={key:1,class:"image-box"},Ve={key:2,class:"image-box"},Ue=A({__name:"CropSize",setup(z){const i=u(null),n=u(""),c=u(""),p=u(null),v=u(50),e=u(50),g=u(1),b=u(100),o=u(100),r=u(0),k=u(0),f=u(0),y=u(0),V=u(0),C=u(0),L=u(500),h=s=>{const l=s.raw;n.value=URL.createObjectURL(l);const m=new Image;m.src=n.value,m.onload=()=>{L.value=Math.min.call(null,m.width,500,document.body.clientWidth),g.value=L.value/m.width,b.value=m.width*g.value,o.value=m.height*g.value},l.arrayBuffer().then(E=>{p.value=E})},M=()=>{n.value="",c.value="",i.value.clearFiles()},J=s=>{V.value=s.clientX,C.value=s.clientY},K=s=>{if(s.clientX&&s.clientY){const l=s.clientX-V.value,m=s.clientY-C.value;f.value+m+e.value<=500&&y.value+l+v.value<=500&&f.value+m>=0&&y.value+l>=0&&(r.value=f.value+m,k.value=y.value+l)}},Q=s=>{f.value=r.value,y.value=k.value},Z=s=>{s.preventDefault(),s.stopPropagation()},ee=s=>{const{clientX:l,clientY:m}=s.touches[0];V.value=l,C.value=m},le=s=>{if(s.touches.length){const{clientX:l,clientY:m}=s.touches[0],E=l-V.value,U=m-C.value;f.value+U+e.value<=500&&y.value+E+v.value<=500&&f.value+U>=0&&y.value+E>=0&&(r.value=f.value+U,k.value=y.value+E)}},te=s=>{f.value=r.value,y.value=k.value},ae=()=>{const s=j.service({fullscreen:!0,text:"裁剪中..."});X(()=>{const l=re(new Uint8Array(p.value),Math.floor(k.value/g.value),Math.floor(r.value/g.value),Math.floor(v.value/g.value),Math.floor(e.value/g.value)),m=new Blob([new Uint8Array(l)],{type:"image/png"});c.value=URL.createObjectURL(m),s.close()})},ne=()=>{const s=j.service({fullscreen:!0,text:"裁剪中..."});X(()=>{const l=ie(new Uint8Array(p.value)),m=new Blob([new Uint8Array(l)],{type:"image/png"});c.value=URL.createObjectURL(m),s.close()})};return(s,l)=>{const m=ue,E=Y,U=N,oe=P,F=q;return _(),$("main",null,[l[8]||(l[8]=x("div",{class:"header"},"使用rust的image包进行图片裁剪然后通过webassembly进行调用，自选尺寸后移动裁剪框进行进行裁剪",-1)),t(n)?(_(),D(E,{key:0,style:{"margin-bottom":"10px"}},{default:d(()=>[x("div",we,[l[2]||(l[2]=x("span",null,"裁剪框的宽度：",-1)),a(m,{modelValue:t(v),"onUpdate:modelValue":l[0]||(l[0]=R=>I(v)?v.value=R:null),min:50,max:t(b)},null,8,["modelValue","max"])]),x("div",ke,[l[3]||(l[3]=x("span",null,"裁剪框的高度：",-1)),a(m,{modelValue:t(e),"onUpdate:modelValue":l[1]||(l[1]=R=>I(e)?e.value=R:null),min:50,max:t(o)},null,8,["modelValue","max"])])]),_:1})):B("",!0),a(oe,{ref_key:"upload",ref:i,action:"#","list-type":"picture","auto-upload":!1,limit:1,onChange:h},{default:d(()=>[a(U,null,{default:d(()=>l[4]||(l[4]=[w("上传")])),_:1,__:[4]}),a(U,{onClick:T(M,["stop"])},{default:d(()=>l[5]||(l[5]=[w("重置")])),_:1,__:[5]}),t(n)?(_(),D(U,{key:0,onClick:T(ae,["stop"])},{default:d(()=>l[6]||(l[6]=[w("裁剪")])),_:1,__:[6]})):B("",!0),t(n)?(_(),D(U,{key:1,onClick:T(ne,["stop"])},{default:d(()=>l[7]||(l[7]=[w("边缘")])),_:1,__:[7]})):B("",!0)]),_:1},512),t(n)?(_(),$("div",Ce,[a(F,{style:S({width:`${t(L).value}px`}),src:t(n),fit:"fill"},null,8,["style","src"]),x("div",{class:"crop-box",style:S({width:`${t(v)}px`,height:`${t(e)}px`,top:`${t(r)}px`,left:`${t(k)}px`}),draggable:"true",onDragstart:J,onDrag:K,onDragend:Q,onDragover:Z,onTouchstart:ee,onTouchmove:le,onTouchend:te},null,36)])):B("",!0),t(c)?(_(),$("div",Ve,[a(F,{src:t(c),style:S({width:`${t(b).value}px`}),fit:"fill"},null,8,["src","style"])])):B("",!0)])}}}),Ee=G(Ue,[["__scopeId","data-v-0d1db188"]]),Be={key:0},Ie=A({__name:"BigNumberCaculate",setup(z){const i=u(123456789),n=u(123456789),c=u(""),p=v=>{switch(v){case 1:c.value=`${i.value} + ${n.value} = ${ve(`${i.value}`,`${n.value}`)}`;break;case 2:c.value=`${i.value} - ${n.value} = ${pe(`${i.value}`,`${n.value}`)}`;break;case 3:c.value=`${i.value} x ${n.value} = ${me(`${i.value}`,`${n.value}`)}`;break;case 4:c.value=`${i.value} / ${n.value} = ${ce(`${i.value}`,`${n.value}`)}`;break}};return(v,e)=>{const g=W,b=Y,o=N;return _(),D(b,{alignment:"flex-start",direction:"vertical",size:"20",class:"big-numebr-caculate"},{default:d(()=>[e[10]||(e[10]=x("div",null,"使用rust来进行大数的计算后转成字符串输出，这样可以拓展js的精算范围，但是只是对整数比较友好，浮点数跟js是一样的，都是双精度的，浮点数的计算能力其实跟js差不多。不过也可以借助第三方库类似BigFloat等来实现值比较大的高精度的浮点数计算",-1)),a(b,{size:"10"},{default:d(()=>[a(g,{modelValue:t(i),"onUpdate:modelValue":e[0]||(e[0]=r=>I(i)?i.value=r:null),precision:0},null,8,["modelValue"]),a(g,{modelValue:t(n),"onUpdate:modelValue":e[1]||(e[1]=r=>I(n)?n.value=r:null),precision:0},null,8,["modelValue"])]),_:1}),a(b,{size:"10"},{default:d(()=>[a(o,{onClick:e[2]||(e[2]=r=>p(1))},{default:d(()=>e[6]||(e[6]=[w("加")])),_:1,__:[6]}),a(o,{onClick:e[3]||(e[3]=r=>p(2))},{default:d(()=>e[7]||(e[7]=[w("减")])),_:1,__:[7]}),a(o,{onClick:e[4]||(e[4]=r=>p(3))},{default:d(()=>e[8]||(e[8]=[w("乘")])),_:1,__:[8]}),a(o,{onClick:e[5]||(e[5]=r=>p(4))},{default:d(()=>e[9]||(e[9]=[w("除")])),_:1,__:[9]})]),_:1}),t(c)?(_(),$("div",Be,de(t(c)),1)):B("",!0)]),_:1,__:[10]})}}}),Ye=A({__name:"Webassembly",setup(z){const i=u("crop-multi"),n=c=>{i.name=c.props.name};return(c,p)=>{const v=fe;return _(),$("main",null,[a(t(_e),{modelValue:t(i),"onUpdate:modelValue":p[0]||(p[0]=e=>I(i)?i.value=e:null),class:"demo-tabs",onTabClick:n},{default:d(()=>[a(v,{label:"等比例裁剪",name:"crop-multi"},{default:d(()=>[a($e)]),_:1}),a(v,{label:"自选尺寸裁剪",name:"crop-size"},{default:d(()=>[a(Ee)]),_:1}),a(v,{label:"大数计算",name:"big-number-caculate"},{default:d(()=>[a(Ie)]),_:1})]),_:1},8,["modelValue"])])}}});export{Ye as default};
