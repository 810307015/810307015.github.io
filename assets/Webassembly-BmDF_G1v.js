/* empty css                    */import{d as D,r as o,e as _,c as x,g as l,w as c,a as y,u as e,i as B,b as w,h as L,F as W,j as P,k as I,E as R,l as re,n as j,m as q,q as X,s as Y,v as G,p as J,f as K,x as Q,_ as Z,y as T,z as M,A as de,B as ve,C as pe,t as me,D as _e,G as fe,H as ge,I as be,J as he,K as ye}from"./index-hX5f7RGf.js";const N=$=>(J("data-v-fb93322b"),$=$(),K(),$),$e=N(()=>y("div",{class:"header"},"使用rust的image包进行图片裁剪然后通过webassembly进行调用，直接对大尺寸图片进行等比例裁剪",-1)),xe=N(()=>y("span",null,"需要裁剪成几行：",-1)),we=N(()=>y("span",null,"需要裁剪成几列：",-1)),ke={key:0,class:"image-list"},Ce={class:"row"},Ve={class:"col"},Ue=D({__name:"CropMulti",setup($){const u=o(null),t=o([]),i=o(3),v=o(3),p=b=>{const m=b.raw,s=R.service({fullscreen:!0,text:"裁剪中..."});m.arrayBuffer().then(k=>{re(new Uint8Array(k),i.value,v.value).forEach(h=>{const V=new Blob([new Uint8Array(h)],{type:"image/png"});t.value.push(URL.createObjectURL(V))}),j(()=>{s.close()})})},a=()=>{t.value=[],u.value.clearFiles()},g=()=>{t.value.forEach((b,m)=>{const s=document.createElement("a");s.href=b,s.download=`crop-${m+1}`,s.click()})};return(b,m)=>{const s=q,k=X,f=Y,h=G,V=Q;return _(),x("main",null,[$e,l(k,{style:{"margin-bottom":"10px"}},{default:c(()=>[y("div",null,[xe,l(s,{modelValue:e(i),"onUpdate:modelValue":m[0]||(m[0]=C=>B(i)?i.value=C:null),min:1,max:10,onChange:a},null,8,["modelValue"])]),y("div",null,[we,l(s,{modelValue:e(v),"onUpdate:modelValue":m[1]||(m[1]=C=>B(v)?v.value=C:null),min:1,max:10,onChange:a},null,8,["modelValue"])])]),_:1}),l(h,{ref_key:"upload",ref:u,action:"#","list-type":"picture","auto-upload":!1,limit:1,onChange:p},{default:c(()=>[l(f,null,{default:c(()=>[w("上传")]),_:1}),l(f,{onClick:L(a,["stop"])},{default:c(()=>[w("重置")]),_:1})]),_:1},512),e(t).length?(_(),x("div",ke,[(_(!0),x(W,null,P(new Array(e(i)).fill(0),(C,S)=>(_(),x("div",Ce,[(_(!0),x(W,null,P(new Array(e(v)).fill(0),(H,A)=>(_(),x("div",Ve,[l(V,{style:{width:"100px"},src:e(t)[S*e(v)+A],fit:"contain"},null,8,["src"])]))),256))]))),256)),l(f,{type:"primary",onClick:g},{default:c(()=>[w("一键下载")]),_:1})])):I("",!0)])}}}),Ee=Z(Ue,[["__scopeId","data-v-fb93322b"]]),F=$=>(J("data-v-0d1db188"),$=$(),K(),$),Ie=F(()=>y("div",{class:"header"},"使用rust的image包进行图片裁剪然后通过webassembly进行调用，自选尺寸后移动裁剪框进行进行裁剪",-1)),Be={style:{padding:"20px"}},Se=F(()=>y("span",null,"裁剪框的宽度：",-1)),Le={style:{padding:"20px"}},Te=F(()=>y("span",null,"裁剪框的高度：",-1)),De={key:1,class:"image-box"},Ae={key:2,class:"image-box"},ze=D({__name:"CropSize",setup($){const u=o(null),t=o(""),i=o(""),v=o(null),p=o(50),a=o(50),g=o(1),b=o(100),m=o(100),s=o(0),k=o(0),f=o(0),h=o(0),V=o(0),C=o(0),S=o(500),H=n=>{const d=n.raw;t.value=URL.createObjectURL(d);const r=new Image;r.src=t.value,r.onload=()=>{S.value=Math.min.call(null,r.width,500,document.body.clientWidth),g.value=S.value/r.width,b.value=r.width*g.value,m.value=r.height*g.value},d.arrayBuffer().then(E=>{v.value=E})},A=()=>{t.value="",i.value="",u.value.clearFiles()},ee=n=>{V.value=n.clientX,C.value=n.clientY},le=n=>{if(n.clientX&&n.clientY){const d=n.clientX-V.value,r=n.clientY-C.value;f.value+r+a.value<=500&&h.value+d+p.value<=500&&f.value+r>=0&&h.value+d>=0&&(s.value=f.value+r,k.value=h.value+d)}},te=n=>{f.value=s.value,h.value=k.value},ae=n=>{n.preventDefault(),n.stopPropagation()},ne=n=>{const{clientX:d,clientY:r}=n.touches[0];V.value=d,C.value=r},oe=n=>{if(n.touches.length){const{clientX:d,clientY:r}=n.touches[0],E=d-V.value,U=r-C.value;f.value+U+a.value<=500&&h.value+E+p.value<=500&&f.value+U>=0&&h.value+E>=0&&(s.value=f.value+U,k.value=h.value+E)}},se=n=>{f.value=s.value,h.value=k.value},ue=()=>{const n=R.service({fullscreen:!0,text:"裁剪中..."});j(()=>{const d=ve(new Uint8Array(v.value),Math.floor(k.value/g.value),Math.floor(s.value/g.value),Math.floor(p.value/g.value),Math.floor(a.value/g.value)),r=new Blob([new Uint8Array(d)],{type:"image/png"});i.value=URL.createObjectURL(r),n.close()})},ce=()=>{const n=R.service({fullscreen:!0,text:"裁剪中..."});j(()=>{const d=pe(new Uint8Array(v.value)),r=new Blob([new Uint8Array(d)],{type:"image/png"});i.value=URL.createObjectURL(r),n.close()})};return(n,d)=>{const r=de,E=X,U=Y,ie=G,O=Q;return _(),x("main",null,[Ie,e(t)?(_(),T(E,{key:0,style:{"margin-bottom":"10px"}},{default:c(()=>[y("div",Be,[Se,l(r,{modelValue:e(p),"onUpdate:modelValue":d[0]||(d[0]=z=>B(p)?p.value=z:null),min:50,max:e(b)},null,8,["modelValue","max"])]),y("div",Le,[Te,l(r,{modelValue:e(a),"onUpdate:modelValue":d[1]||(d[1]=z=>B(a)?a.value=z:null),min:50,max:e(m)},null,8,["modelValue","max"])])]),_:1})):I("",!0),l(ie,{ref_key:"upload",ref:u,action:"#","list-type":"picture","auto-upload":!1,limit:1,onChange:H},{default:c(()=>[l(U,null,{default:c(()=>[w("上传")]),_:1}),l(U,{onClick:L(A,["stop"])},{default:c(()=>[w("重置")]),_:1}),e(t)?(_(),T(U,{key:0,onClick:L(ue,["stop"])},{default:c(()=>[w("裁剪")]),_:1})):I("",!0),e(t)?(_(),T(U,{key:1,onClick:L(ce,["stop"])},{default:c(()=>[w("边缘")]),_:1})):I("",!0)]),_:1},512),e(t)?(_(),x("div",De,[l(O,{style:M({width:`${e(S).value}px`}),src:e(t),fit:"fill"},null,8,["style","src"]),y("div",{class:"crop-box",style:M({width:`${e(p)}px`,height:`${e(a)}px`,top:`${e(s)}px`,left:`${e(k)}px`}),draggable:"true",onDragstart:ee,onDrag:le,onDragend:te,onDragover:ae,onTouchstart:ne,onTouchmove:oe,onTouchend:se},null,36)])):I("",!0),e(i)?(_(),x("div",Ae,[l(O,{src:e(i),style:M({width:`${e(b).value}px`}),fit:"fill"},null,8,["src","style"])])):I("",!0)])}}}),Me=Z(ze,[["__scopeId","data-v-0d1db188"]]),Re=y("div",null,"使用rust来进行大数的计算后转成字符串输出，这样可以拓展js的精算范围，但是只是对整数比较友好，浮点数跟js是一样的，都是双精度的，浮点数的计算能力其实跟js差不多。不过也可以借助第三方库类似BigFloat等来实现值比较大的高精度的浮点数计算",-1),je={key:0},Xe=D({__name:"BigNumberCaculate",setup($){const u=o(123456789),t=o(123456789),i=o(""),v=p=>{switch(p){case 1:i.value=`${u.value} + ${t.value} = ${be(`${u.value}`,`${t.value}`)}`;break;case 2:i.value=`${u.value} - ${t.value} = ${ge(`${u.value}`,`${t.value}`)}`;break;case 3:i.value=`${u.value} x ${t.value} = ${fe(`${u.value}`,`${t.value}`)}`;break;case 4:i.value=`${u.value} / ${t.value} = ${_e(`${u.value}`,`${t.value}`)}`;break}};return(p,a)=>{const g=q,b=X,m=Y;return _(),T(b,{alignment:"flex-start",direction:"vertical",size:"20",class:"big-numebr-caculate"},{default:c(()=>[Re,l(b,{size:"10"},{default:c(()=>[l(g,{modelValue:e(u),"onUpdate:modelValue":a[0]||(a[0]=s=>B(u)?u.value=s:null),precision:0},null,8,["modelValue"]),l(g,{modelValue:e(t),"onUpdate:modelValue":a[1]||(a[1]=s=>B(t)?t.value=s:null),precision:0},null,8,["modelValue"])]),_:1}),l(b,{size:"10"},{default:c(()=>[l(m,{onClick:a[2]||(a[2]=s=>v(1))},{default:c(()=>[w("加")]),_:1}),l(m,{onClick:a[3]||(a[3]=s=>v(2))},{default:c(()=>[w("减")]),_:1}),l(m,{onClick:a[4]||(a[4]=s=>v(3))},{default:c(()=>[w("乘")]),_:1}),l(m,{onClick:a[5]||(a[5]=s=>v(4))},{default:c(()=>[w("除")]),_:1})]),_:1}),e(i)?(_(),x("div",je,me(e(i)),1)):I("",!0)]),_:1})}}}),Fe=D({__name:"Webassembly",setup($){const u=o("crop-multi"),t=i=>{u.name=i.props.name};return(i,v)=>{const p=ye;return _(),x("main",null,[l(e(he),{modelValue:e(u),"onUpdate:modelValue":v[0]||(v[0]=a=>B(u)?u.value=a:null),class:"demo-tabs",onTabClick:t},{default:c(()=>[l(p,{label:"等比例裁剪",name:"crop-multi"},{default:c(()=>[l(Ee)]),_:1}),l(p,{label:"自选尺寸裁剪",name:"crop-size"},{default:c(()=>[l(Me)]),_:1}),l(p,{label:"大数计算",name:"big-number-caculate"},{default:c(()=>[l(Xe)]),_:1})]),_:1},8,["modelValue"])])}}});export{Fe as default};
